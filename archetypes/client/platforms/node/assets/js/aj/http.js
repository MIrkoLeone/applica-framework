"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function buildQueryString(e){var t="",r=!0;for(var n in e){var s=r?"":"&";t+=s+n+"="+e[n],r=!1}return t}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),assert=require("../framework/assert"),_=require("../libs/underscore"),HttpClient=function(){function e(t,r,n){_classCallCheck(this,e),this.url=t,this.method=r||"GET",this.headers={},this.data=n||{},this.accept=null,this.contentType=null,this.rawResponse=!1}return _createClass(e,[{key:"request",value:function(){var e=this;return new Promise(function(t,r){try{assert.assertNotEmpty(e.url,"url is not defined"),assert.assertNotEmpty(e.method,"method is not defined");var n=_.isObject(e.data)?buildQueryString(e.data):e.data,s=e.headers||{};__httpClient.request(e.url,e.method,n,s,e.accept,e.contentType,e.rawResponse,function(e,n){e?(logger.e("error"),r(e)):t(n)})}catch(u){logger.e(u),r(u)}})}}]),e}(),request=function(e,t,r,n,s,u,a){var t=t||"GET",r=r||{},n=n||{},a=a||!1,l=new HttpClient(e);return l.method=t,l.data=r,l.headers=n,l.rawResponse=a,l.accept=s,l.contentType=u,l.request()};exports.HttpClient=HttpClient,exports.request=request,exports.get=function(e,t,r){var t=t||{},r=r||{};return request(e,"GET",t,r,null,null,!1)},exports.post=function(e,t,r){var t=t||{},r=r||{};return request(e,"POST",t,r,null,null,!1)},exports.put=function(e,t,r){var t=t||{},r=r||{};return request(e,"PUT",t,r,null,null,!1)},exports["delete"]=function(e,t,r){var t=t||{},r=r||{};return request(e,"DELETE",t,r,null,null,!1)},exports.download=function(e,t,r){var t=t||{},r=r||{};return request(e,"GET",t,r,null,null,!0)};